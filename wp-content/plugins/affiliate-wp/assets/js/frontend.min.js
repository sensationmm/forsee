jQuery(document).ready(function(a){a("#affwp-generate-ref-url").submit(function(){var f=a(this).find("#affwp-url").val(),i=a(this).find("#affwp-campaign").val(),e=a(this).find('input[type="hidden"].affwp-referral-var').val(),t=a(this).find('input[type="hidden"].affwp-affiliate-id').val(),r=affwp_vars.pretty_affiliate_urls,n="";if(f.indexOf("#")>0)var l=f.split("#");if(l&&(f=l[0]),r){if(f.indexOf("?")<0)f.match(/\/$/)||(f+="/"),i.length&&(i="?campaign="+i);else{var p=f.split("?");f=p[0],f.match(/\/$/)||(f+="/"),n="/?"+p[1],i.length&&(i="&campaign="+i)}f=f+e+"/"+t+n+i}else{if(i.length&&(i="&campaign="+i),f.indexOf("?")<0)f.match(/\/$/)||(f+="/");else{var p=f.split("?");f=p[0],f.match(/\/$/)||(f+="/"),n="&"+p[1]}f=f+"?"+e+"="+t+n+i}return l&&(f+="#"+l[1]),f=f.replace(/([^:])(\/\/+)/g,"$1/"),a(this).find(".affwp-referral-url-wrap").slideDown(),a(this).find("#affwp-referral-url").val(f).focus(),!1})});