jQuery(document).ready(function(e){function t(){var t=e("#affiliate-wp-migrate-user-accounts input:checkbox:checked").length,a=e("#affiliate-wp-migrate-user-accounts input[type=submit]");t>0?a.prop("disabled",!1):a.prop("disabled",!0)}var a;window.formfield="",e("body").on("click",".affwp_settings_upload_button",function(t){t.preventDefault();var r=e(this);return window.formfield=e(this).parent().prev(),a?void a.open():(a=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:r.data("uploader_title"),button:{text:r.data("uploader_button_text")},multiple:!1}),a.on("menu:render:default",function(e){var t={};e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.set(t)}),a.on("insert",function(){var e=a.state().get("selection");e.each(function(e,t){e=e.toJSON(),window.formfield.val(e.url)})}),void a.open())});var a;window.formfield="",e(".affwp-referrals-export-toggle").click(function(){e(".affwp-referrals-export-toggle").toggle(),e("#affwp-referrals-export-form").slideToggle()}),e("#affwp-referrals-export-form").submit(function(){return confirm(affwp_vars.confirm)?void 0:!1}),e(".affwp-datepicker").length&&e(".affwp-datepicker").datepicker(),e(".affwp-user-search").each(function(){var t=e(this),a="affwp_search_users",r=t.val(),i=t.data("affwp-status"),o=e("#user_id");t.autocomplete({source:ajaxurl+"?action="+a+"&term="+r+"&status="+i,delay:500,minLength:2,position:{offset:"0, -1"},select:function(e,t){o.val(t.item.user_id)},open:function(){t.addClass("open")},close:function(){t.removeClass("open")}}),t.on("keyup",function(){this.value||o.val("")})});var a;e("body").on("click",".upload_image_button",function(t){t.preventDefault();var r=e(this).prev();return a?void a.open():(a=wp.media.frames.file_frame=wp.media({frame:"select",title:"Choose Image",multiple:!1,library:{type:"image"},button:{text:"Use Image"}}),a.on("menu:render:default",function(e){var t={};e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.set(t)}),a.on("select",function(){var t=a.state().get("selection").first().toJSON();r.val(t.url);var i=e("<img />");i.attr("src",t.url),e("#preview_image").empty().append(i),e("#preview_image img")&&e("#preview_image").show()}),void a.open())}),e("body").on("click",".affiliates_page_affiliate-wp-referrals .delete",function(e){return confirm(affwp_vars.confirm_delete_referral)?!0:!1}),t(),e("body").on("change","#affiliate-wp-migrate-user-accounts input:checkbox",function(){t()}),e("#affwp_add_affiliate #status").change(function(){var t=e(this).val();"active"==t?e("#affwp-welcome-email-row").show():(e("#affwp-welcome-email-row").hide(),e("#affwp-welcome-email-row #welcome_email").prop("checked",!1))})});