var wc_pb_bundle_scripts={};jQuery(document).ready(function(a){function b(a,b,c){this.$self=b,this.$bundled_item_cart=b.find(".cart"),this.$bundled_item_content=b.find(".bundled_item_optional_content, .bundled_item_cart_content"),this.$bundled_item_image=b.find(".bundled_product_images"),this.$bundled_item_title=b.find(".bundled_product_title_inner"),this.$bundled_item_qty=b.find("input.bundled_qty"),this.bundled_item_index=c,this.bundled_item_id=this.$bundled_item_cart.data("bundled_item_id"),this.bundled_item_title=this.$bundled_item_cart.data("title"),this.product_type=this.$bundled_item_cart.data("type"),"undefined"==typeof this.bundled_item_id&&(this.bundled_item_id=this.$bundled_item_cart.attr("data-bundled-item-id")),this.get_quantity=function(){return this.$bundled_item_qty.val()},this.is_optional=function(){return this.$bundled_item_cart.data("optional")},this.is_selected=function(){var a=!0;return 1==this.$bundled_item_cart.data("optional")&&0==this.$bundled_item_cart.data("optional_status")&&(a=!1),a},this.set_selected=function(a){this.is_optional()&&this.$bundled_item_cart.data("optional_status",a)},this.init_scripts=function(){this.$self.find(".bundled_product_optional_checkbox input").change(),"variable"!==this.product_type&&"variable-subscription"!==this.product_type||this.$bundled_item_cart.hasClass("variations_form")||(this.$bundled_item_cart.addClass("variations_form").wc_variation_form(),this.$bundled_item_cart.find(".variations select:eq(0)").change()),this.$self.find("div").stop(!0,!0),this.update_selection_title()},this.update_selection_title=function(a){if(0===this.$bundled_item_title.length)return!1;var b=parseInt(this.get_quantity());"undefined"==typeof a&&(a=!1),a&&(b=this.$bundled_item_qty.attr("min"));var c=this.bundled_item_title,d=b>1?wc_bundle_params.i18n_qty_string.replace("%s",b):"",e=wc_bundle_params.i18n_title_string.replace("%t",c).replace("%q",d);this.$bundled_item_title.html(e)},this.reset_selection_title=function(){this.update_selection_title(!0)}}function c(a){var b=wc_bundle_params.currency_format_decimal_sep,c=wc_bundle_params.currency_position,d=wc_bundle_params.currency_symbol,e=wc_bundle_params.currency_format_trim_zeros,f=wc_bundle_params.currency_format_num_decimals;if("yes"==e&&f>0){for(var g=0;f>g;g++)b+="0";a=a.replace(b,"")}var h="";return"left"==c?h='<span class="amount">'+d+a+"</span>":"right"==c?h='<span class="amount">'+a+d+"</span>":"left_space"==c?h='<span class="amount">'+d+" "+a+"</span>":"right_space"==c&&(h='<span class="amount">'+a+" "+d+"</span>"),h}function d(a){var b=wc_bundle_params.currency_format_num_decimals,c=wc_bundle_params.currency_format_decimal_sep,d=wc_bundle_params.currency_format_thousand_sep,e=a,f=isNaN(b=Math.abs(b))?2:b,g=void 0==c?",":c,h=void 0==d?".":d,i=0>e?"-":"",j=parseInt(e=Math.abs(+e||0).toFixed(f))+"",k=(k=j.length)>3?k%3:0;return i+(k?j.substr(0,k)+h:"")+j.substr(k).replace(/(\d{3})(?=\d)/g,"$1"+h)+(f?g+Math.abs(e-j).toFixed(f).slice(2):"")}a("body").on("quick-view-displayed",function(){a(".bundle_form .bundle_data").each(function(){a(this).wc_pb_bundle_form()})}),a.fn.wc_pb_bundle_form=function(){if(!a(this).hasClass("bundle_data"))return!0;var e=a(this),f=a(this).data("bundle_id");if("undefined"==typeof f){if(f=a(this).attr("data-bundle-id"),!f)return!1;a(this).data("bundle_id",f)}var g=e.closest(".bundle_form");"undefined"!=typeof wc_pb_bundle_scripts[f]&&g.find("*").off(),wc_pb_bundle_scripts[f]={$bundle_data:e,$bundle_form:g,$bundle_wrap:e.find(".bundle_wrap"),$bundled_items:g.find(".bundled_product"),$bundle_price:e.find(".bundle_price"),$bundle_error:e.find(".bundle_error"),$bundle_error_content:e.find(".bundle_error ul.msg"),$bundle_button:e.find(".bundle_button"),bundled_items:{},$initial_stock_status:!1,update_bundle_lock:!1,validation_messages:[],init:function(){this.bind_event_handlers(),this.init_bundled_items();var b=this,c=b.$bundle_data;0==b.$bundle_error_content.length&&(b.$bundle_error.length>0&&b.$bundle_error.remove(),b.$bundle_price.after('<div class="bundle_error" style="display:none"><ul class="msg woocommerce-info"></ul></div>'),b.$bundle_error=c.find(".bundle_error"),b.$bundle_error_content=b.$bundle_error.find(".msg"));var d=c.find("#product-addons-total");b.$bundle_price.after(d),b.$bundle_wrap.find("p.stock").length>0&&(b.$initial_stock_status=b.$bundle_wrap.find("p.stock").clone()),b.$bundle_button.find('input[name*="bundle_variation"], input[name*="bundle_attribute"]').remove(),a.each(b.bundled_items,function(a,b){b.init_scripts()}),b.update_bundle(),b.$bundle_data.trigger("woocommerce-product-bundle-initialized",[b])},bind_event_handlers:function(){var b=this;this.$bundle_data.on("woocommerce-nyp-updated-item",function(c){var d=a(this),e=d.find(".nyp");if(e.is(":visible")){var f=b.$bundle_data.data("bundle_price_data");f.base_price=e.data("price"),b.update_bundle()}c.stopPropagation()}).on("change",".bundle_button input.qty",function(a){b.update_bundle()})},init_bundled_items:function(){var c=this;c.$bundled_items.each(function(d){c.bundled_items[d]=new b(c,a(this),d),c.bind_bundled_item_event_handlers(c.bundled_items[d])})},bind_bundled_item_event_handlers:function(b){var c=this;b.$self.on("change","input.bundled_qty",function(d){var e=parseFloat(a(this).attr("min")),f=parseFloat(a(this).attr("max"));e>=0&&(parseFloat(a(this).val())<e||isNaN(parseFloat(a(this).val())))&&a(this).val(e),f>0&&parseFloat(a(this).val())>f&&a(this).val(f),b.update_selection_title(),c.update_bundle()}).on("change",".bundled_product_optional_checkbox input",function(d){a(this).is(":checked")?(b.$bundled_item_content.slideDown(200),b.set_selected(!0),b.$self.find(".bundled_item_qty_col .quantity").removeClass("quantity_hidden"),b.$self.find(".variations_form .variations select:eq(0)").trigger("change")):(b.$bundled_item_content.slideUp(200),b.set_selected(!1),b.$self.find(".bundled_item_qty_col .quantity").addClass("quantity_hidden"),b.$bundled_item_image.addClass("images"),b.$self.find(".variations_form").trigger("reset_image"),b.$bundled_item_image.removeClass("images")),b.update_selection_title(),c.update_bundle(),d.stopPropagation()}).on("found_variation",function(a,d){var e=b.bundled_item_id,f=c.$bundle_data.data("bundle_price_data");"yes"===f.per_product_pricing&&(f.prices[e]=d.price,f.regular_prices[e]=d.regular_price,f.recurring_prices[e]=d.recurring_price,f.regular_recurring_prices[e]=d.regular_recurring_price,f.recurring_html[e]=d.recurring_html,f.recurring_keys[e]=d.recurring_key),b.$bundled_item_image.removeClass("images");var g=b.$self.find(".bundled_item_qty_col .quantity input");g.length>0&&g.attr("min",d.min_qty).attr("max",d.max_qty),b.$bundled_item_qty.trigger("change"),b.update_selection_title(),c.update_bundle(),a.stopPropagation()}).on("reset_image",function(a){b.$bundled_item_image.removeClass("images")}).on("woocommerce-product-addons-update",function(a){a.stopPropagation()}).on("woocommerce_variation_select_focusin",function(a){a.stopPropagation()}).on("woocommerce_variation_select_change",function(d){var e=a(this).find(".variations_form");b.is_selected()&&b.$bundled_item_image.addClass("images"),a(this).find(".variations .attribute-options select").each(function(){return""===a(this).val()?(e.find(".bundled_item_wrap .stock").addClass("disabled"),c.update_bundle(),!1):void 0}),d.stopPropagation()}),b.$bundled_item_cart.on("woocommerce-product-addons-update",function(a){c.update_bundle(),a.stopPropagation()}).on("woocommerce-nyp-updated-item",function(d){var e=b.bundled_item_id,f=a(this).find(".nyp");if(f.is(":visible")){var g=c.$bundle_data.data("bundle_price_data");g.prices[e]=f.data("price"),c.update_bundle()}d.stopPropagation()})},update_bundle:function(){var a=this;return a.update_bundle_lock===!0?!1:(a.update_bundle_lock=!0,void window.setTimeout(function(){a.update_bundle_task(),a.update_bundle_lock=!1},20))},update_bundle_task:function(){var b=this,e=b.$bundle_form,f=!1,g=!1,h=!0,i={},j={},k=b.$bundle_data.data("bundle_price_data");if(b.validation_messages=[],a.each(b.bundled_items,function(a,b){var c=b.$bundled_item_cart,d=b.bundled_item_id,e=b.get_quantity();b.is_selected()?j[d]=e:j[d]=0,c.data("quantity",j[d]),"variable"!==b.product_type&&"variable-subscription"!==b.product_type||""!=c.find(".bundled_item_wrap input.variation_id").val()||(k.prices[d]=0,k.regular_prices[d]=0,b.is_selected()&&(h=!1))}),h||b.add_validation_message(wc_bundle_params.i18n_select_options),b.$bundle_data.triggerHandler("woocommerce-product-bundle-validate",[b]),b.passes_validation()){var l=parseInt(b.$bundle_button.find("input.qty").val());if(a.each(b.bundled_items,function(b,c){var d=c.$bundled_item_cart,e=c.bundled_item_id;i[e]=0,d.find(".addon").each(function(){var b=0;a(this).is(".addon-custom-price")?b=a(this).val():a(this).is(".addon-input_multiplier")?(isNaN(a(this).val())||""==a(this).val()?(a(this).val(""),a(this).closest("p").find(".addon-alert").show()):(""!=a(this).val()&&a(this).val(Math.ceil(a(this).val())),a(this).closest("p").find(".addon-alert").hide()),b=a(this).data("price")*a(this).val()):a(this).is(".addon-checkbox, .addon-radio")?a(this).is(":checked")&&(b=a(this).data("price")):a(this).is(".addon-select")?a(this).val()&&(b=a(this).find("option:selected").data("price")):a(this).val()&&(b=a(this).data("price")),b||(b=0),i[e]=parseFloat(i[e])+parseFloat(b)})}),"no"===k.per_product_pricing&&""===k.base_price)return void b.hide_bundle();if(k.total=parseFloat(k.base_price),k.regular_total=parseFloat(k.base_regular_price),"yes"===k.per_product_pricing)for(var m in k.prices)k.total+=(parseFloat(k.prices[m])+parseFloat(i[m]))*j[m],k.regular_total+=(parseFloat(k.regular_prices[m])+parseFloat(i[m]))*j[m];else for(var n in i)k.total+=parseFloat(i[n])*j[n],k.regular_total+=parseFloat(i[n])*j[n];var o=b.$bundle_data.find("#product-addons-total");o.length>0&&(o.data("price",k.total),b.$bundle_data.trigger("woocommerce-product-addons-update"));var p=!1;if("yes"===k.bundle_is_composited){var q=b.$bundle_form.closest(".composite_form").find(".composite_data").data("price_data");p=q.per_product_pricing===!0||"yes"===q.per_product_pricing,wc_bundle_params.i18n_total=wc_bundle_params.i18n_subtotal}if("yes"===k.per_product_pricing||p){var r="",s="",t=0==k.total&&"yes"===k.show_free_string?wc_bundle_params.i18n_free:c(d(l*k.total)),u=c(d(l*k.regular_total));r=k.regular_total>k.total?'<p class="price">'+k.price_string.replace("%s",'<span class="total">'+wc_bundle_params.i18n_total+"</span><del>"+u+"</del> <ins>"+t+"</ins>")+"</p>":'<p class="price">'+k.price_string.replace("%s",'<span class="total">'+wc_bundle_params.i18n_total+"</span>"+t)+"</p>";var v=b.get_bundled_subscriptions();if(v){var w={};a.each(v,function(a,b){var c=b.bundled_item_id,d=k.recurring_keys[c];if(0===j[c])return!0;if("undefined"==typeof w[d]){var e={html:k.recurring_html[c],price:(parseFloat(k.recurring_prices[c])+parseFloat(i[c]))*j[c],regular_price:(parseFloat(k.regular_recurring_prices[c])+parseFloat(i[c]))*j[c]};w[d]=e}else w[d].price+=(parseFloat(k.recurring_prices[c])+parseFloat(i[c]))*j[c],w[d].regular_price+=(parseFloat(k.regular_recurring_prices[c])+parseFloat(i[c]))*j[c]}),a.each(w,function(a,b){var e=0===b.price?wc_bundle_params.i18n_free:c(d(l*b.price)),f=c(d(l*b.regular_price));b.regular_price>b.price?b.html='<span class="amount bundled_sub_price_html">'+b.html.replace("%s","<del>"+f+"</del> <ins>"+e+"</ins>")+"</span>":b.html='<span class="amount bundled_sub_price_html">'+b.html.replace("%s",e)+"</span>",s=(""!==s?s+'<span class="plus"> + </span>':s)+b.html}),r=r.replace("%r",s)}b.$bundle_price.html(r),s&&b.$bundle_price.find(".bundled_subscriptions_price_html").show()}else b.$bundle_price.html("");a.each(b.bundled_items,function(a,b){if(!b.is_selected())return!0;var c=b.$bundled_item_cart.find("p.stock:not(.disabled)");c.hasClass("out-of-stock")&&j[b.bundled_item_id]>0&&(f=!0)}),f?b.$bundle_button.find("button").prop("disabled",!0).addClass("disabled"):b.$bundle_button.find("button").prop("disabled",!1).removeClass("disabled");var x=b.$bundle_data.data("button_behaviour");"new"!==x?b.$bundle_wrap.slideDown(200):(b.$bundle_price.slideDown(200),b.$bundle_error.slideUp(200)),b.$bundle_wrap.trigger("woocommerce-product-bundle-show"),e.find(".component_data").data("price",k.total),e.find(".component_data").data("regular_price",k.regular_total),e.find(".component_data").data("component_set",!0)}else b.hide_bundle();a.each(b.bundled_items,function(a,b){if(!b.is_selected())return!0;var c=b.$bundled_item_cart.find("p.stock:not(.disabled)");c.hasClass("out-of-stock")&&j[b.bundled_item_id]>0&&(g=c.clone().html(wc_bundle_params.i18n_partially_out_of_stock)),c.hasClass("available-on-backorder")&&!f&&(g=c.clone().html(wc_bundle_params.i18n_partially_on_backorder))});var y=b.$bundle_wrap.find("p.stock");g?y.length>0?y.hasClass("inactive")?(y.replaceWith(g.hide()),g.slideDown(200)):y.replaceWith(g):(b.$bundle_button.before(g.hide()),g.slideDown(200)):b.$initial_stock_status?y.replaceWith(b.$initial_stock_status):y.addClass("inactive").slideUp(200),b.$bundle_wrap.trigger("woocommerce-composited-product-update")},hide_bundle:function(b){var c=this,d=c.$bundle_form,e=a("<ul/>");if("undefined"==typeof b){var f=c.get_validation_messages();f.length>0?a.each(f,function(b,c){e.append(a("<li/>").html(c))}):e.append(a("<li/>").html(wc_bundle_params.i18n_unavailable_text))}else e.append(a("<li/>").html(b.toString()));d.find(".component_data").data("component_set",!1);var g=c.$bundle_data.data("button_behaviour");"new"===g?(c.$bundle_price.slideUp(200),c.$bundle_error_content.html(e.html()),c.$bundle_error.slideDown(200),c.$bundle_button.find("button").prop("disabled",!0).addClass("disabled")):c.$bundle_wrap.slideUp(200),c.$bundle_wrap.trigger("woocommerce-product-bundle-hide")},get_bundled_subscriptions:function(){var b=this,c={},d=!1;return a.each(b.bundled_items,function(a,b){("subscription"===b.product_type||"variable-subscription"===b.product_type)&&(c[a]=b,d=!0)}),d?c:!1},add_validation_message:function(a){this.validation_messages.push(a.toString())},get_validation_messages:function(){return this.validation_messages},passes_validation:function(){return this.validation_messages.length>0?!1:!0}},wc_pb_bundle_scripts[f].init()},a(".bundle_form .bundle_data").each(function(){a(this).wc_pb_bundle_form()})});